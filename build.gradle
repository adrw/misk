ext {
  kotlinVersion = '1.2.51'
  awsVersion = '1.11.143'
  jettyVersion = '9.4.8.v20171121'
  prometheusVersion = '0.4.0'

  dep = [
          kotlinStdLib         : "org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlinVersion",
          kotlinReflect        : "org.jetbrains.kotlin:kotlin-reflect:$kotlinVersion",
          kotlinGradlePlugin   : "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion",
          kotlinReflection     : "org.jetbrains.kotlin:kotlin-reflect:$kotlinVersion",
          kotlinTest           : "org.jetbrains.kotlin:kotlin-test:$kotlinVersion",
          kotlinxCoroutines     : "org.jetbrains.kotlinx:kotlinx-coroutines-core:0.24.0",
          assertj              : "org.assertj:assertj-core:3.9.0",
          bouncycastle         : "org.bouncycastle:bcprov-jdk15on:1.55",
          docker               : "com.github.docker-java:docker-java:3.0.14",
          guava                : 'com.google.guava:guava:23.6-jre',
          guice                : 'com.google.inject:guice:4.1.0',
          guiceMultibindings   : 'com.google.inject.extensions:guice-multibindings:4.1.0',
          guiceServlet         : 'com.google.inject.extensions:guice-servlet:4.1.0',
          javaxInject          : 'javax.inject:javax.inject:1',
          jettyServer          : "org.eclipse.jetty:jetty-server:$jettyVersion",
          jettyServlet         : "org.eclipse.jetty:jetty-servlet:$jettyVersion",
          jettyWebsocketServer : "org.eclipse.jetty.websocket:websocket-server:$jettyVersion",
          jettyWebsocketServlet: "org.eclipse.jetty.websocket:websocket-servlet:$jettyVersion",
          servletApi           : "javax.servlet:javax.servlet-api:3.1.0",
          kubernetesClient     : 'io.kubernetes:client-java:1.0.0',
          moshi                : 'com.squareup.moshi:moshi-kotlin:1.5.0',
          loggingApi           : 'io.github.microutils:kotlin-logging:1.4.9',
          wireRuntime          : 'com.squareup.wire:wire-runtime:2.3.0-RC1',
          jacksonDatabind      : 'com.fasterxml.jackson.core:jackson-databind:2.9.3',
          jacksonDataformatYaml: 'com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:2.9.3',
          jacksonKotlin        : 'com.fasterxml.jackson.module:jackson-module-kotlin:2.9.3',
          jacksonJsr310        : 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.9.4',
          hibernateCore        : 'org.hibernate:hibernate-core:5.3.0.Final',
          gcpDatastore         : 'com.google.cloud:google-cloud-datastore:1.26.0',
          gcpKms               : 'com.google.apis:google-api-services-cloudkms:v1-rev30-1.23.0',
          okHttp               : 'com.squareup.okhttp3:okhttp:3.11.0',
          okHttpMockWebServer  : 'com.squareup.okhttp3:mockwebserver:3.11.0',
          junitApi             : 'org.junit.jupiter:junit-jupiter-api:5.0.2',
          junitParams          : 'org.junit.jupiter:junit-jupiter-params:5.0.2',
          junitEngine          : 'org.junit.jupiter:junit-jupiter-engine:5.0.2',
          gcpCloudStorage      : 'com.google.cloud:google-cloud-storage:1.15.0',
          jCommander           : 'com.beust:jcommander:1.72',
          openTracing          : 'io.opentracing:opentracing-api:0.31.0',
          openTracingUtil      : 'io.opentracing:opentracing-util:0.31.0',
          openTracingMock      : 'io.opentracing:opentracing-mock:0.31.0',
          openTracingOkHttp    : 'io.opentracing.contrib:opentracing-okhttp3:0.1.0',
          tracingJaeger        : 'com.uber.jaeger:jaeger-core:0.24.0',
          tracingZipkin        : 'io.opentracing.brave:brave-opentracing:0.29.0',
          zipkinReporter       : 'io.zipkin.reporter2:zipkin-sender-okhttp3:2.4.1',
          zipkinBrave          : 'io.zipkin.brave:brave:4.17.2',
          retrofit             : 'com.squareup.retrofit2:retrofit:2.4.0',
          retrofitMoshi        : 'com.squareup.retrofit2:converter-moshi:2.4.0',
          retrofitWire         : 'com.squareup.retrofit2:converter-wire:2.4.0',
          gcpLogback           : 'com.google.cloud:google-cloud-logging-logback:0.39.0-alpha',
          hikariCp             : 'com.zaxxer:HikariCP:3.1.0',
          hsqldb               : 'org.hsqldb:hsqldb:2.4.0',
          awsApi               : "com.amazonaws:aws-java-sdk-bom:$awsVersion",
          awsLogging           : "com.amazonaws:aws-java-sdk-logs:$awsVersion",
          logbackClassic       : 'ch.qos.logback:logback-classic:1.2.3',
          logbackJsonCore      : 'ch.qos.logback.contrib:logback-json-core:0.1.5',
          slf4jApi             : 'org.slf4j:slf4j-api:1.7.25',
          mockitoCore          : 'org.mockito:mockito-core:2.8.9',
          jaxbApi              : 'javax.xml.bind:jaxb-api:2.3.0',
          mysql                : 'mysql:mysql-connector-java:5.1.16',
          vitess               : 'io.vitess:vitess-jdbc:2.2.0',
          prometheusClient     : "io.prometheus:simpleclient:$prometheusVersion",
          prometheusHotspot    : "io.prometheus:simpleclient_hotspot:$prometheusVersion",
          prometheusHttpserver : "io.prometheus:simpleclient_httpserver:$prometheusVersion",
  ]

  isCi = "true".equals(System.getenv('CI'))
}

subprojects {
  buildscript {
    repositories {
      mavenCentral()
      jcenter()
    }

    dependencies {
      classpath dep.kotlinGradlePlugin
      classpath 'org.junit.platform:junit-platform-gradle-plugin:1.0.2'
      classpath 'com.github.jengelman.gradle.plugins:shadow:2.0.2'
      classpath 'com.vanniktech:gradle-maven-publish-plugin:0.4.0'
    }
  }
  repositories {
    mavenCentral()
    jcenter()
  }
}
